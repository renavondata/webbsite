
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
{# functions1.asp functionality moved to Python helpers #}
<!--#include virtual="/dbpub/navbars.asp"-->
{# Variables moved to Flask route #}
<title>CCASS concentration: {{ n }}</title>
<link rel="stylesheet" type="text/css" href="../templates/main.css"/>
</head>
<body>
{% extends "base_database.html" %}
{% block content %}
{% if not i %}
	<h2>CCASS concentration analysis</h2>
	<p><b>{{ stock_name }}</b></p>
{% else %}
{# TODO: Port ASP logic:
	Call orgBar(stock_name,p,0)
	Call ccassbar(i,d,3) #}
{% endif %}
<ul class="navlist"><li><a href="cconc.asp">All stocks</a></li></ul>
<div class="clear"></div>
<form method="get" action="cconchist.asp">
	<div class="inputs">
		Stock code: <input type="text" name="sc" size="5" value="">
		<input type="submit" value="Go">
	</div>
	<div class="clear"></div>
</form>
{% if i>0 %}
	<h3>CCASS concentration analysis</h3>
	<p>The denominator for the first two columns is all holdings in CCASS except 
	unnamed (or &quot;Non-Consenting&quot;) Investor Participants. The numerator and 
	denominator in the third column includes the aggregate holdings of unnamed 
	Investor Participants. The "Stake in CCASS" is the percentage of issued 
	shares which are in CCASS.</p>
	<table class="numtable yscroll">
	<tr>
		<th class="colHide1">Row</th>
		<th><a href="?i={{ i }}&amp;sort={% if sort == 'datedn' %}dateup{% else %}datedn{% endif %}">Date</a></th>
		<th><a href="?i={{ i }}&amp;sort={% if sort == 'cp5dn' %}cp5up{% else %}cp5dn{% endif %}">Top 5<br>%</a></th>
		<th><a href="?i={{ i }}&amp;sort={% if sort == 'cp10dn' %}cp10up{% else %}cp10dn{% endif %}">Top 10<br>%</a></th>
		<th><a href="?i={{ i }}&amp;sort={% if sort == 'cp10ipdn' %}cp10ipup{% else %}cp10ipdn{% endif %}">Top 10<br>+NCIP<br>%</a></th>
		<th><a href="?i={{ i }}&amp;sort={% if sort == 'stakdn' %}stakup{% else %}stakdn{% endif %}">Stake in<br>CCASS<br>%</a></th>
	</tr>
	{% for row in history %}
		<tr>
			<td class="colHide1">{{ loop.index }}</td>
			<td><a href="choldings.asp?i={{ i }}&amp;d={{ row.atDate }}">{{ row.atDate }}</a></td>
			<td>{{ "%.2f"|format(row.cp5 * 100) if row.cp5 is not none else '' }}</td>
			<td>{{ "%.2f"|format(row.cp10 * 100) if row.cp10 is not none else '' }}</td>
			<td>{{ "%.2f"|format(row.cp10ip * 100) if row.cp10ip is not none else '' }}</td>
			<td>{{ "%.2f"|format(row.stake * 100) if row.stake is not none else '' }}</td>
		</tr>
	{% endfor %}
	</table>
	{% if not history %}
		<p>None found.</p>
	{% endif %}
{% endif %}
	{# TODO: Port ASP logic: End If Call CloseConRs(con,rs)... #}
{% endblock %}
</body>
</html>