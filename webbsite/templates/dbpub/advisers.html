{% extends "base_database.html" %}

{% block title %}Advisers of: {{ org_name }}{% endblock %}

{% block content %}
<h2>{{ org_name }}</h2>

{# Simple navigation for non-existent orgs (matches ASP orgBar behavior) #}
{% if person_id == 0 %}
<ul class="navlist">
	<li><a href='/dbpub/orgdata.asp?p=0'>Key Data</a></li>
</ul>
<div class="clear"></div>
{% else %}
{# TODO: Add full orgBar navigation for existing orgs #}
{# Navigation for current/history #}
<ul class="navlist">
	<li{% if hide=='Y' %} class="livebutton"{% endif %}><a href="{{ url_for('dbpub.advisers', p=person_id, d=d, u=u, sort=sort, hide='Y') }}">Current</a></li>
	<li{% if hide=='N' %} class="livebutton"{% endif %}><a href="{{ url_for('dbpub.advisers', p=person_id, d=d, u=u, sort=sort, hide='N') }}">History</a></li>
</ul>
<div class="clear"></div>
{% endif %}

<ul class="navlist"><li><a target="_blank" href="FAQWWW.asp">FAQ</a></li></ul>
<div class="clear"></div>
<div class="letterbox">Please note that due to the planned <a href="../articles/shutdown.asp">shutdown</a> of Webb-site.com,
the directors, officers and advisers of HK-listed companies have ceased to be updated effective 2025-03-31. Appointments
and resignations effective on or before that date were recorded, as were advisers recorded in annual reports
filed on or before that date. A repository of our database and software <a href="../articles/repository.asp"><strong>is
	now available</strong></a>.</div>
<form method="get" action="advisers.asp">
	<input type="hidden" name="p" value="{{ person_id }}">
	<input type="hidden" name="sort" value="{{ sort }}">
	<div class="inputs">
		Snapshot date: <input type="date" name="d" id="d" value="{{ d }}" onblur="this.form.submit()">
	</div>
	<div class="inputs">
		<input type='checkbox' name='u' id='u' value='1'{% if u %} checked{% endif %} onchange='this.form.submit()'> exclude unknown removal dates
	</div>
	<div class="inputs">
		<input type="submit" value="Go">
		<input type="submit" value="clear" onclick="document.getElementById('d').value='{{ d }}';document.getElementById('u').checked=false;">
	</div>
	<div class="clear"></div>
</form>

{% if adviserships|length == 0 %}
<p>None found.</p>
{% else %}
	<table class="opltable">
		<tr>
			<th class="colHide1">Row</th>
			<th><a href="{{ url_for('dbpub.advisers', p=person_id, d=d, hide=hide, u=u, sort='advup' if sort!='advup' else 'advdn') }}">Adviser</a></th>
			<th><a href="{{ url_for('dbpub.advisers', p=person_id, d=d, hide=hide, u=u, sort='rolup' if sort!='rolup' else 'roldn') }}">Role</a></th>
			<th class="colHide2"><a href="{{ url_for('dbpub.advisers', p=person_id, d=d, hide=hide, u=u, sort='addup' if sort!='addup' else 'adddn') }}">Added</a></th>
			<th><a href="{{ url_for('dbpub.advisers', p=person_id, d=d, hide=hide, u=u, sort='remup' if sort!='remup' else 'remdn') }}">Removed</a></th>
		</tr>
		{% for adv in adviserships %}
		<tr>
			<td class="colHide1">{{ loop.index }}</td>
			<td><a href="{{ url_for('dbpub.enigma_orgdata', p=adv.adviserID) }}">{{ adv.adviserName }}</a></td>
			<td>{{ adv.role }}</td>
			<td class="colHide2">{{ adv.addDate }}</td>
			<td>{{ adv.remDate }}</td>
		</tr>
		{% endfor %}
	</table>
{% endif %}

{% endblock %}
