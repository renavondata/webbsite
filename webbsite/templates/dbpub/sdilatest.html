{% extends "base_database.html" %}
{% block title %}Latest Director Dealings - Renavon Hong Kong Database{% endblock %}

{% block content %}
<h2>Latest Director Dealings (SDI)</h2>

<p>Latest 200 significant dealings by directors and their associates, disclosed under Part XV of the SFO.</p>

{% if sdi %}
<table class="numtable">
	<tr>
		<th>
			{% if sort == 'reldup' %}<strong>Release</strong>
			{% elif sort == 'relddn' %}<strong>Release &#8595;</strong>
			{% else %}<a href="?sort=relddn">Release</a>
			{% endif %}
		</th>
		<th>Settle</th>
		<th>
			{% if sort == 'codeup' %}<strong>Code</strong>
			{% elif sort == 'codedn' %}<strong>Code &#8595;</strong>
			{% else %}<a href="?sort=codeup">Code</a>
			{% endif %}
		</th>
		<th class="left">
			{% if sort == 'stokup' %}<strong>Stock</strong>
			{% elif sort == 'stokdn' %}<strong>Stock &#8595;</strong>
			{% else %}<a href="?sort=stokup">Stock</a>
			{% endif %}
		</th>
		<th class="left">
			{% if sort == 'nameup' %}<strong>Person</strong>
			{% elif sort == 'namedn' %}<strong>Person &#8595;</strong>
			{% else %}<a href="?sort=nameup">Person</a>
			{% endif %}
		</th>
		<th>
			{% if sort == 'rsnup' %}<strong>Reason</strong>
			{% elif sort == 'rsndn' %}<strong>Reason &#8595;</strong>
			{% else %}<a href="?sort=rsnup">Reason</a>
			{% endif %}
		</th>
		<th>Shares</th>
		<th>Curr</th>
		<th>Price</th>
		<th>
			{% if sort == 'lvalup' %}<strong>Value</strong>
			{% elif sort == 'lvaldn' %}<strong>Value &#8595;</strong>
			{% else %}<a href="?sort=lvaldn">Value</a>
			{% endif %}
		</th>
	</tr>

	{% for row in sdi %}
	<tr>
		<td>{{ row.reldate.strftime('%Y-%m-%d') if row.reldate else '-' }}</td>
		<td>{{ row.settledate.strftime('%Y-%m-%d') if row.settledate else '-' }}</td>
		<td><a href="{{ url_for('dbpub_listings.code', code=row.stockcode) }}">{{ row.stockcode }}</a></td>
		<td class="left">{{ row.oname }}</td>
		<td class="left">
			{% if row.ptype == 'P' %}
				<a href="{{ url_for('dbpub_people.natperson', p=row.holderid) }}">{{ row.name }}</a>
			{% else %}
				<a href="{{ url_for('dbpub_statistics.enigma_orgdata', p=row.holderid) }}">{{ row.name }}</a>
			{% endif %}
		</td>
		<td>{{ row.rsnsht }}</td>
		<td class="right">{{ '{:,.0f}'.format(row.shsinv) if row.shsinv else '-' }}</td>
		<td>{{ row.currency if row.currency else '-' }}</td>
		<td class="right">{{ '{:.3f}'.format(row.price) if row.price else '-' }}</td>
		<td class="right">{{ '{:,.0f}'.format(row.value) if row.value else '-' }}</td>
	</tr>
	{% endfor %}
</table>

<p class="footnote">SDI = Significant Dealer Information disclosed under Part XV of the Securities and Futures Ordinance.</p>

{% else %}
<p>No recent director dealings found.</p>
{% endif %}

{% endblock %}
