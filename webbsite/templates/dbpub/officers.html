{% extends "base_database.html" %}
{% block title %}Officers: {{ org_name }}{% endblock %}
{% block content %}
<h2>{{ org_name }}</h2>

{# TODO: Add orgBar navigation #}

{# Navigation for current/history #}
<ul class="navlist">
	<li{% if hide=='Y' %} class="livebutton"{% endif %}><a href="{{ url_for('dbpub_corporate.officers', p=person_id, d=d, u=u, sort=sort, hide='Y') }}">Current</a></li>
	<li{% if hide=='N' %} class="livebutton"{% endif %}><a href="{{ url_for('dbpub_corporate.officers', p=person_id, d=d, u=u, sort=sort, hide='N') }}">History</a></li>
</ul>
<div class="clear"></div>

<form method="get" action="{{ url_for('dbpub_corporate.officers') }}">
	<input type="hidden" name="p" value="{{ person_id }}">
	<input type="hidden" name="sort" value="{{ sort }}">
	<input type="hidden" name="hide" value="{{ hide }}">
	<div class="inputs">
		Snapshot date: <input type="date" name="d" id="d" value="{{ d }}" onblur="this.form.submit()">
	</div>
	<div class="inputs">
		<input type="checkbox" name="u" id="u" value="1" {% if u %}checked{% endif %} onchange="this.form.submit()">
		<label for="u">Exclude unknown resignation dates</label>
	</div>
	<div class="inputs">
		<input type="submit" value="Go">
	</div>
	<div class="clear"></div>
</form>

{% if officers_by_rank|length == 0 %}
	<p><b>No officers found for this organization.</b></p>
{% else %}
	{% for rank_id, rank_data in officers_by_rank.items() %}
	<h3>{{ rank_data.rankText }}</h3>
	<table class="opltable">
		<tr>
			<th class="colHide1">Row</th>
			<th><a href="{{ url_for('dbpub_corporate.officers', p=person_id, d=d, hide=hide, u=u, sort='namup' if sort!='namup' else 'namdn') }}">Director</a></th>
			<th><a href="{{ url_for('dbpub_corporate.officers', p=person_id, d=d, hide=hide, u=u, sort='posup' if sort!='posup' else 'posdn') }}">Position</a></th>
			<th class="colHide2"><a href="{{ url_for('dbpub_corporate.officers', p=person_id, d=d, hide=hide, u=u, sort='appup' if sort!='appup' else 'appdn') }}">From</a></th>
			<th><a href="{{ url_for('dbpub_corporate.officers', p=person_id, d=d, hide=hide, u=u, sort='resup' if sort!='resup' else 'resdn') }}">Until</a></th>
		</tr>
		{% for dir in rank_data.officers %}
		<tr>
			<td class="colHide1">{{ loop.index }}</td>
			<td><a href="persondata.asp?p={{ dir.director }}">{{ dir.PersonName }}</a></td>
			<td><span class="info">{{ dir.posShort }}<span>{{ dir.posLong }}</span></span></td>
			<td class="colHide2">{{ dir.from_date }}</td>
			<td>{{ dir.until }}</td>
		</tr>
		{% endfor %}
	</table>
	{% endfor %}
{% endif %}
{% endblock %}
